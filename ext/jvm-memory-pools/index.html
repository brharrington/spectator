<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Memory Pools - Spectator Docs</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/custom.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Memory Pools";
    var mkdocs_page_input_path = "ext/jvm-memory-pools.md";
    var mkdocs_page_url = "/ext/jvm-memory-pools/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Spectator Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Getting Started</span></li>

        
            
    <ul class="subnav">
    <li><span>Meter Types</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/counter/">Counters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/timer/">Timers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/gauge/">Gauges</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/dist-summary/">Distribution Summaries</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/testing/">Testing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/netflix/">Netflix Integration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/servo-comparison/">Servo Comparison</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Extensions</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jvm-buffer-pools/">Buffer Pools</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jvm-gc/">Garbage Collection</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jvm-gc-causes/">GC Causes</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Memory Pools</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#memory-pools">Memory Pools</a></li>
                
                    <li><a class="toctree-l4" href="#getting-started">Getting Started</a></li>
                
                    <li><a class="toctree-l4" href="#metrics">Metrics</a></li>
                
                    <li><a class="toctree-l4" href="#metric-dimensions">Metric Dimensions</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../log4j2/">Log4j2 Appender</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Registries</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../registry/metrics3/">Metrics3</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../registry/servo/">Servo</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../registry/tdigest/">TDigest</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Spectator Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Extensions &raquo;</li>
        
      
    
    <li>Memory Pools</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/Netflix/spectator" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="memory-pools">Memory Pools<a class="headerlink" href="#memory-pools" title="Permanent link">&para;</a></h1>
<p>Uses the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryPoolMXBean.html">MemoryPoolMXBean</a> provided by the JDK to monitor the sizes of java memory spaces such as perm gen, eden, old gen, etc. </p>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>To get information about memory pools in spectator just setup registration of standard MXBeans. Note, if you are building an app at Netflix this should happen automatically via the normal platform initialization.</p>
<pre><code class="java">import com.netflix.spectator.api.Spectator;
import com.netflix.spectator.jvm.Jmx;

Jmx.registerStandardMXBeans(Spectator.registry());
</code></pre>

<h2 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h2>
<h3 id="jvmmemoryused">jvm.memory.used<a class="headerlink" href="#jvmmemoryused" title="Permanent link">&para;</a></h3>
<p>Gauge reporting the current amount of memory used. For the young and old gen pools this metric will typically have a sawtooth pattern. For alerting or detecting memory pressure the <a href="https://github.com/Netflix/spectator/wiki/Garbage-Collection#jvmgclivedatasize">live data size</a> is probably a better option.</p>
<p><strong>Unit:</strong> bytes</p>
<p><strong>Dimensions:</strong>
see <a href="#metric-dimensions">metric dimensions</a></p>
<h3 id="jvmmemorycommitted">jvm.memory.committed<a class="headerlink" href="#jvmmemorycommitted" title="Permanent link">&para;</a></h3>
<p>Gauge reporting the current amount of memory committed. From the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryUsage.html">javadocs</a>, committed is:</p>
<blockquote>
<p>The amount of memory (in bytes) that is guaranteed to be available for use by the Java virtual machine. The amount of committed memory may change over time (increase or decrease). The Java virtual machine may release memory to the system and committed could be less than init. committed will always be greater than or equal to used.</p>
</blockquote>
<p><strong>Unit:</strong> bytes </p>
<p><strong>Dimensions:</strong>
see <a href="#metric-dimensions">metric dimensions</a></p>
<h3 id="jvmmemorymax">jvm.memory.max<a class="headerlink" href="#jvmmemorymax" title="Permanent link">&para;</a></h3>
<p>Gauge reporting the max amount of memory that can be used. From the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryUsage.html">javadocs</a>, committed is:</p>
<blockquote>
<p>The maximum amount of memory (in bytes) that can be used for memory management. Its value may be undefined. The maximum amount of memory may change over time if defined. The amount of used and committed memory will always be less than or equal to max if max is defined. A memory allocation may fail if it attempts to increase the used memory such that used &gt; committed even if used &lt;= max would still be true (for example, when the system is low on virtual memory).</p>
</blockquote>
<p><strong>Unit:</strong> bytes </p>
<p><strong>Dimensions:</strong>
see <a href="#metric-dimensions">metric dimensions</a></p>
<h2 id="metric-dimensions">Metric Dimensions<a class="headerlink" href="#metric-dimensions" title="Permanent link">&para;</a></h2>
<p>All memory metrics have the following dimensions:</p>
<ul>
<li><code>id</code>: name of the memory pool being reported. The names of the pools vary depending on the garbage collector algorithm being used.</li>
<li><code>memtype</code>: type of memory. It has two possible values: <code>HEAP</code> and <code>NON_HEAP</code>. For more information see the javadocs for <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryType.html">MemoryType</a>.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../log4j2/" class="btn btn-neutral float-right" title="Log4j2 Appender">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../jvm-gc-causes/" class="btn btn-neutral" title="GC Causes"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/Netflix/spectator" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../jvm-gc-causes/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../log4j2/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
